{% extends 'admin/Inicio/index.html' %}
{% load static %}
{% block conteudo %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'Css/cadastro/cadastroFornecedor.css' %}">
    <title>Cadastro de Fornecedor</title>
</head>
<body>

    <h2 style="text-align: center;">Cadastro de Fornecedor</h2>

    <form method="POST" action="{% url 'cadastro_fornecedor' %}">
        {% csrf_token %}

        <label for="id_cnpj">CNPJ:</label>
        {{ form.cnpj }}
        {{ form.cnpj.errors }}

        <label for="id_nome">Nome:</label>
        {{ form.nome }}

        <label for="id_telefone">Telefone:</label>
        {{ form.telefone }}
        {{ form.telefone.errors }}

        <label for="id_email">Email:</label>
        {{ form.email }}
        {{ form.email.errors }}

        <button type="submit">Salvar Fornecedor</button>
    </form>
    <script>
        function formatarCNPJ(cnpj) {
            cnpj = cnpj.replace(/\D/g, "");
            cnpj = cnpj.replace(/^(\d{2})(\d)/, "$1.$2");
            cnpj = cnpj.replace(/^(\d{2})\.(\d{3})(\d)/, "$1.$2.$3");
            cnpj = cnpj.replace(/\.(\d{3})(\d)/, ".$1/$2");
            cnpj = cnpj.replace(/(\d{4})(\d)/, "$1-$2");
            return cnpj;
        }

        function formatarTelefone(telefone) {
            telefone = telefone.replace(/\D/g, "");
            if (telefone.length <= 10) {
                telefone = telefone.replace(/(\d{2})(\d{4})(\d{0,4})/, "($1) $2-$3");
            } else {
                telefone = telefone.replace(/(\d{2})(\d{5})(\d{0,4})/, "($1) $2-$3");
            }
            return telefone.trim().slice(0, 15);
        }

        document.addEventListener("DOMContentLoaded", function () {
            const cnpjInput = document.getElementById("id_cnpj");
            const telefoneInput = document.getElementById("id_telefone");

            if (cnpjInput) {
                cnpjInput.addEventListener("input", function () {
                    this.value = formatarCNPJ(this.value);
                });
            }
            if (telefoneInput) {
                telefoneInput.addEventListener("input", function () {
                    this.value = formatarTelefone(this.value);
                });
            }
        });    
    </script>
    {%endblock conteudo%}
</body>
</html>
